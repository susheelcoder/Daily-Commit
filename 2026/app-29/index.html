<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>App 29</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- PWA META -->
<meta name="theme-color" content="#0a0c10">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<link rel="icon" href="./icon-511.ico">
<link rel="manifest" id="manifest">

<style>
body{
  margin:0;
  height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  flex-direction:column;
  background:#0a0c10;
  color:#00ff9d;
  font-family:system-ui;
  text-align:center;
}
button{
  padding:16px 36px;
  font-size:1.1rem;
  font-weight:700;
  border:none;
  border-radius:14px;
  background:#00ff9d;
  color:#000;
  cursor:pointer;
}
@media (display-mode: standalone){
  #installBtn{display:none}
}
</style>
</head>

<body>

<h1>App 29</h1>
<p>Standalone PWA</p>

<button id="installBtn" onclick="installApp()">ðŸ“² Install App</button>

<script>
/* ================= MANIFEST ================= */
const manifest = {
  name: "App 29",
  short_name: "App29",
  start_url: "/2026/app-29/",
  scope: "/2026/app-29/",
  display: "standalone",
  background_color: "#0a0c10",
  theme_color: "#0a0c10",
  icons: [
    {
      src: "1.ico",
      sizes: "192x192",
      type: "image/png",
      purpose: "any maskable"
    },
    {
      src: "1.ico",
      sizes: "512x512",
      type: "image/png",
      purpose: "any maskable"
    }
  ]
};

const blob = new Blob([JSON.stringify(manifest)], {type:"application/json"});
document.getElementById("manifest").href = URL.createObjectURL(blob);

/* ================= INSTALL ================= */
let promptEvent;
window.addEventListener("beforeinstallprompt", e => {
  e.preventDefault();
  promptEvent = e;
});

function installApp(){
  promptEvent?.prompt();
}

/* ================= SERVICE WORKER ================= */
if ("serviceWorker" in navigator) {
  const sw = `
    self.addEventListener("install", e => self.skipWaiting());
    self.addEventListener("activate", e => self.clients.claim());
  `;
  const swBlob = new Blob([sw], {type:"text/javascript"});
  navigator.serviceWorker.register(URL.createObjectURL(swBlob), {
    scope: "/2026/app-29/"
  });
}
</script>

</body>
</html>
